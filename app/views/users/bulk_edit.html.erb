<!-- Header -->
<div class="container-fluid bg-dark-gray-blue text-white py-3">
  <h1 class="text-center font-primary-title">Bulk Edit Users</h1>
</div>
<div class="container-fluid bg-gold py-1"></div>

<div class="container-fluid bg-dark-navy text-white pt-4 pb-5 min-vh-100">
  <div class="default-padding">

    <div class="bg-white text-legion-blue p-3 mb-4 default-border-radius">
      <p class="m-0 font-secondary-body">
        <strong>You are editing <%= @users.count %> users.</strong>
        <span class="ms-2 text-muted">Leave fields blank to keep existing values.</span>
      </p>
    </div>

    <%= form_with url: bulk_update_users_path, method: :post, local: true do %>
      <% @users.each { |u| concat hidden_field_tag("user_ids[]", u.id) } %>

      <div class="bg-white text-legion-blue p-4 default-border-radius">
        <h2 class="h5 mb-3 font-primary-heading">Update Fields</h2>

        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Status</label>
            <%= select_tag "bulk_update[status]",
                  options_for_select([['Keep Current',''],['Active','active'],['Inactive','inactive']]),
                  class: "form-select default-border-radius" %>
          </div>

          <div class="col-md-6">
            <label class="form-label">Graduation Year</label>
            <%= number_field_tag "bulk_update[graduation_year]", nil, min: 2020, max: 2035,
                  placeholder: "Keep current",
                  class: "form-control default-border-radius" %>
          </div>

          <div class="col-md-6">
            <label class="form-label">Major</label>
            <%= text_field_tag "bulk_update[major]", nil,
                  placeholder: "Keep current",
                  class: "form-control default-border-radius" %>
          </div>

          <div class="col-md-6">
            <label class="form-label">T-Shirt Size</label>
            <%= select_tag "bulk_update[t_shirt_size]",
                  options_for_select([['Keep Current',''],['XS','XS'],['S','S'],['M','M'],['L','L'],['XL','XL'],['XXL','XXL'],['XXXL','XXXL']]),
                  class: "form-select default-border-radius" %>
          </div>
        </div>

        <div class="mt-4">
          <h3 class="h6 mb-2 font-primary-heading">Selected Users:</h3>
          <div class="bg-gray-100 rounded p-3" style="max-height: 160px; overflow-y:auto;">
            <% @users.each do |u| %>
              <span class="badge bg-cornflower-blue me-2 mb-2"><%= u.full_name %> (<%= u.email %>)</span>
            <% end %>
          </div>
        </div>

        <div class="mt-4 d-flex gap-2">
          <%= submit_tag "Update All Selected Users", class: "btn btn-gold text-dark-navy default-border-radius" %>
          <%= link_to "Cancel", users_path, class: "btn btn-outline-light default-border-radius" %>
        </div>
      </div>
    <% end %>

  </div>
</div>
<div class="container-fluid bg-gold py-1"></div>


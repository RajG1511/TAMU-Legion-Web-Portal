<div class="default-padding py-8">
  <h1 class="font-primary-title text-dark-navy mb-4">Bulk Edit Users</h1>

  <div class="bg-gold text-dark-navy p-3 mb-6">
    <p class="font-semibold">You are editing <%= @users.count %> users</p>
    <p class="text-sm">Leave fields blank to keep existing values.</p>
  </div>

  <%= form_with url: bulk_update_users_path, method: :post, local: true do |f| %>
    <% @users.each { |u| concat hidden_field_tag("user_ids[]", u.id) } %>

    <div class="edit-card p-4">
      <h2 class="font-primary-heading mb-3">Update Fields</h2>

      <div class="grid md:grid-cols-2 gap-4">
        <div>
          <%= label_tag "bulk_update[graduation_year]", "Graduation Year", class: "block mb-1" %>
          <%= number_field_tag "bulk_update[graduation_year]", nil, min: 2020, max: 2035, class: "form-dark w-full" %>
        </div>

        <div>
          <%= label_tag "bulk_update[major]", "Major", class: "block mb-1" %>
          <%= text_field_tag "bulk_update[major]", nil, class: "form-dark w-full" %>
        </div>

        <div>
          <%= label_tag "bulk_update[t_shirt_size]", "T-Shirt Size", class: "block mb-1" %>
          <%= select_tag "bulk_update[t_shirt_size]",
                options_for_select([['Keep Current',''],['XS','XS'],['S','S'],['M','M'],['L','L'],['XL','XL'],['XXL','XXL'],['XXXL','XXXL']]),
                class: "form-dark w-full" %>
        </div>

        <div>
          <%= label_tag "bulk_update[status]", "Status", class: "block mb-1" %>
          <%= select_tag "bulk_update[status]",
                options_for_select([['Keep Current',''], ['Active','active'], ['Inactive','inactive']]),
                class: "form-dark w-full" %>
        </div>
      </div>

      <div class="mt-6">
        <h3 class="font-primary-heading mb-2">Selected Users (<%= @users.count %>):</h3>
        <div class="bg-white p-3 border max-h-40 overflow-y-auto">
          <% @users.each do |user| %>
            <span class="inline-block bg-powder-blue text-dark-navy text-sm px-3 py-1 mr-2 mb-2">
              <%= user.full_name %> â€“ <%= user.email %>
            </span>
          <% end %>
        </div>
      </div>

      <div class="flex gap-3 mt-6">
        <%= submit_tag "Update All", class: "btn btn-gold" %>
        <%= link_to "Back", users_path, class: "white-btn" %>
      </div>
    </div>
  <% end %>
</div>


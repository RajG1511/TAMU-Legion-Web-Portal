<!-- Header -->
<div class="container-fluid bg-dark-gray-blue text-white py-3">
  <h1 class="text-center font-primary-title">Bulk Edit Users</h1>
</div>
<div class="container-fluid bg-gold py-1"></div>

<div class="container-fluid bg-dark-navy text-white py-4 min-vh-100">
  <div class="default-padding">
    <div class="bg-white text-legion-blue p-4 default-border-radius">
      <div class="bg-gold text-dark-navy p-2 mb-3">
        <strong>You are editing <%= @users.count %> users.</strong>
        <span class="ms-2">Leave fields blank to keep existing values.</span>
      </div>

      <%= form_with url: bulk_update_users_path, method: :patch, local: true do |f| %>
        <% @users.each { |u| concat hidden_field_tag("user_ids[]", u.id) } %>

        <div class="row g-3">
          <div class="col-md-6">
            <%= label_tag "bulk_update[status]", "Status", class: "form-label" %>
            <%= select_tag "bulk_update[status]",
                  options_for_select([['Keep current', ''], ['Active', 'active'], ['Inactive', 'inactive']]),
                  class: "form-select" %>
          </div>

          <div class="col-md-6">
            <%= label_tag "bulk_update[graduation_year]", "Graduation Year", class: "form-label" %>
            <%= number_field_tag "bulk_update[graduation_year]", nil, min: 2020, max: 2035,
                                 placeholder: "Keep current", class: "form-control" %>
          </div>

          <div class="col-md-6">
            <%= label_tag "bulk_update[major]", "Major", class: "form-label" %>
            <%= text_field_tag "bulk_update[major]", nil, placeholder: "Keep current", class: "form-control" %>
          </div>

          <div class="col-md-6">
            <%= label_tag "bulk_update[t_shirt_size]", "T-Shirt Size", class: "form-label" %>
            <%= select_tag "bulk_update[t_shirt_size]",
                  options_for_select([['Keep current',''], ['XS','XS'], ['S','S'], ['M','M'], ['L','L'], ['XL','XL'], ['XXL','XXL'], ['XXXL','XXXL']]),
                  class: "form-select" %>
          </div>
        </div>

        <div class="mt-4">
          <h6 class="mb-2">Selected Users:</h6>
          <div class="bg-light p-2 rounded" style="max-height: 160px; overflow-y: auto;">
            <% @users.each do |user| %>
              <span class="badge bg-primary me-2 mb-2"><%= user.full_name %> (<%= user.email %>)</span>
            <% end %>
          </div>
        </div>

        <div class="mt-3">
          <%= submit_tag "Update All Selected Users", class: "btn btn-gold text-dark-navy me-2" %>
          <%= link_to "Cancel", users_path, class: "btn btn-outline-secondary" %>
        </div>
      <% end %>
    </div>
  </div>
</div>

